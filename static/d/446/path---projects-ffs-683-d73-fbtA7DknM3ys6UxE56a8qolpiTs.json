{"data":{"allMarkdownRemark":null,"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"building-a-filesystem"},"children":[{"type":"element","tagName":"a","properties":{"href":"#building-a-filesystem","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Building a Filesystem"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"FFS is a \"Linux-compliant\" filesystem built on top of "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/libfuse/libfuse","target":"_blank","rel":["nofollow","noopener","noreferrer"]},"children":[{"type":"text","value":"libfuse"}]},{"type":"text","value":", which is the standard implementation of Linux Filesystems in Userspace (FUSE). This project was an exercise in both understanding the composition of a filesystem, and implementing said understanding in such a way that it could be used alongside an existing Linux installation as the filesystem for a secondary disk. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"high-level-design"},"children":[{"type":"element","tagName":"a","properties":{"href":"#high-level-design","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"High-level Design"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The system was built as an iterative process in two separate stages. The first stage was built to run on an in-memory storage system for the purpose of being able to dump the entire contents of the allocated memory and easily inspect/debug the system on the fly. The second stage involved redefining the values for a set of macros which would allow the system to function in the context of a much larger hard disk. These macros were defined as:"}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Macro"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Memory Storage"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"Disk Storage"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Block Size"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"1024 B"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"4096 B"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Block Number Size"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"4 B"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"4 B"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Inode Contents"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"8 direct, 3 1st indirect, 1 2nd indirect"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"8 direct, 3 1st indirect, 5 2nd indirect"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Total Blocks"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"66,312"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"5,245,960"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Total Bytes"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"67,903,488 B (apprx. 64.75 MiB)"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"21,487,452,160 B (apprx. 20.01 GiB)"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The disk itself was broken up into 5 components- the super block, the free inode list, the free data block list, the inode blocks, and the data blocks."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"testing"},"children":[{"type":"element","tagName":"a","properties":{"href":"#testing","ariaHidden":true,"className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Testing"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Validating the functionality of the filesystem was done by first running "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"mkfs"}]},{"type":"text","value":" on a raw disk to format it according to the filesystem's implementation of the command, then running a series of common commands involving filesystem calls, which would get trapped and redirected by libfuse to our filesystem instead of the host OS's filesystem."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"This project was a joint effort by Nikolas Chaconas, Alvin Oliver Glova, and myself"}]}]}],"data":{"quirksMode":false}},"fields":{"slug":"/projects/ffs"},"frontmatter":{"banner":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAACIklEQVQozzWS2U6TURSF/6fSa70x4cIhRg2KUkuhpaW0lQ5YOtDaQkvneZ74W2oJDRI1TRg0kFalmhJLwGhilPgABl9g+e9NuDonOXt/a629j2AwmaHUTUNj1uLG/RFcM17H1fQV3F6/heKwjKO/Q5yd/8HPs1/oHw1w0PuAXKmKQmUVmUIF6XwJkUQagUgcLq8Pgt3lxaJnGb5QGOMKBUx1C5y/HfD8c0N7robxuxHtL6/Q2dlFSRQZVq03GRiMJrASjiGWyqLWaGLB6YbgD0Vhd3n4QaXRoyY2sbt/gJ3eO0Q24yiLDVQrTYjNFo5PTrG99x6lWh35cg1bbztI5YoSOIl4Ogf3kh9CKJbEvM0JXzCCCaWaC/uDrzj+9gPdj31J+SWKNRGtjU30Ph2i0dpARRIll3TPFMrskDjJbOHCIVmnOahmdDA9t2Fvv4vB8ATdw88cjWImMnkWpaaKuMbC4Xga0WQGa+ttFvD6gxAo99JKCAQm4JhsglVfd7bRk4AEu3QQSaSkJRQZcgmiN4pLSyGOoNTMYkY/hzmLFU8nVZhSa/lORe2tN9xA7ikFOaAmmlUwKs13tcGuPb4AbIsvLpZy98FDyBRKaHTP+CSofGqaTyoiZfoFNOdYKsPbpCUSxOX1M2Q5EIbeaMET+SSEkZt3cG90jGGjj2V4NC7n6ORcazDCbLVDPWuAcX5Bcp3lqFaHCw63l2GUht7JBAH/A1IG4X1E54TbAAAAAElFTkSuQmCC","aspectRatio":2.1333333333333333,"src":"/static/a7d893915765f28a92b05e84e2a3e03d/d4f11/storage.png","srcSet":"/static/a7d893915765f28a92b05e84e2a3e03d/76268/storage.png 640w,\n/static/a7d893915765f28a92b05e84e2a3e03d/fb5f3/storage.png 1280w,\n/static/a7d893915765f28a92b05e84e2a3e03d/d4f11/storage.png 2560w","sizes":"(max-width: 2560px) 100vw, 2560px"}}},"logo":null,"title":"FFS","description":"Linux-compliant file system using libfuse","created":"2018-11-01","updated":"2018-01-01","feature":null,"draft":null,"tags":["FFS","File System","Operating System","Linux","C"],"github":"carsonkk/FFS","website":null,"allowCropping":null,"transparentLogo":null}}},"pageContext":{"slug":"/projects/ffs","pointer":"/ffs/"}}